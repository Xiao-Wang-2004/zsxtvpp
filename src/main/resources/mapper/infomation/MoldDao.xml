<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wang.zsxt.infomation.dao.MoldDao">
    <insert id="insertInfo">
        insert into mold_info(moldid, name, count, type, life, usedlife, location, status, userid)
        values(#{moldid}, #{name}, #{count}, #{type}, #{life}, #{usedlife}, #{location}, #{status}, #{userid})
    </insert>

    <update id="updateInfo">
        update mold_info
        set
        moldid = #{moldid},
        name = #{name},
        count = #{count},
        type = #{type},
        life = #{life},
        usedlife = #{usedlife},
        location = #{location},
        status = #{status}
        where moldid = #{moldid}
        and userid = #{userid}
    </update>

    <update id="updateStatus">
         update mold_info
         set
         status = '1'
         where moldid = #{moldid}
         and userid = #{userid}
    </update>

    <delete id="deleteInfo">
        delete from mold_info
        where moldid = #{moldid}
        and userid = #{userid}
    </delete>


    <select id="getList" resultType="java.util.HashMap">
         select
            ifNull(moldid, '-') as moldid,
            ifNull(name, '-') as name,
            ifNull(count, '-') as count,
            ifNull(type, '-') as type,
            ifNull(life, '-') as life,
            ifNull(usedlife, '-') as usedlife,
            ifNull(location, '-') as location,
            ifNull(status, '-') as status
        from mold_info
        where userid = #{userid}
        <if test="moldid != null and moldid != ''">
            and moldid like CONCAT('%', #{moldid}, '%')
        </if>
         <if test="name != null and name != ''">
            and name like CONCAT('%', #{name}, '%')
        </if>
         <if test="count != null and count != ''">
            and count like CONCAT('%', #{count}, '%')
        </if>
          <if test="type != null and type != ''">
              and type like CONCAT('%', #{type}, '%')
          </if>
         <if test="life != null and life != ''">
              and life like CONCAT('%', #{life}, '%')
          </if>
          <if test="usedlife != null and usedlife != ''">
              and usedlife like CONCAT('%', #{usedlife}, '%')
          </if>
         <if test="location != null and location != ''">
              and location like CONCAT('%', #{location}, '%')
          </if>
          <if test="status != null and status != ''">
              and status like CONCAT('%', #{status}, '%')
          </if>
    </select>

    <select id="getInfo" resultType="java.lang.Integer">
        select count(*)
        from mold_info
        where moldid = #{moldid}
        and userid = #{userid}
    </select>

    <select id="getInfo2" resultType="java.lang.Integer">
        select count(*)
        from mold_info
        where moldid = #{moldid}
          and userid = #{userid}
    </select>
</mapper>